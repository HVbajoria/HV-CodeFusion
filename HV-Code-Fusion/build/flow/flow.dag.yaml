id: template_chat_flow
name: Template Chat Flow
environment:
  python_requirements_txt: requirements.txt
inputs:
  chat_history:
    type: list
    is_chat_input: false
    is_chat_history: true
  input_format:
    type: string
    is_chat_input: false
  output_format:
    type: string
    default: ""
    is_chat_input: false
  code:
    type: string
    default: ""
    is_chat_input: true
outputs:
  answer:
    type: string
    reference: ${multilang_gen.output}
    is_chat_output: true
nodes:
- name: driver_code
  type: prompt
  source:
    type: code
    path: driver_code.jinja2
  inputs:
    input: ${inputs.input_format}
    output: ${inputs.output_format}
    solution: ${inputs.code}
  use_variants: false
- name: driver_code_gen
  type: llm
  source:
    type: code
    path: driver_code_gen.jinja2
  inputs:
    deployment_name: hvcodefusion
    temperature: 0.7
    top_p: 1
    response_format:
      type: text
    text: ${driver_code.output}
  connection: azure_open_ai
  api: chat
  use_variants: false
- name: multilang
  type: prompt
  source:
    type: code
    path: multilang.jinja2
  inputs:
    code: ${driver_code_gen.output}
  use_variants: false
- name: multilang_gen
  type: llm
  source:
    type: code
    path: multilang_gen.jinja2
  inputs:
    deployment_name: hvcodefusion
    temperature: 0.7
    top_p: 1
    response_format:
      type: text
    question: ${multilang.output}
  connection: azure_open_ai
  api: chat
  use_variants: false
